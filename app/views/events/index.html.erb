
<div class="banner-img" >
    <div class="container-form">
      <div class="banner-text">
        <h3>Events</h3>
          <h5 class="text-center">Discover more!</h5>
            <%= form_with url: events_path, method: :get, class: "d-flex justify-content-center" do  %>
            <%= text_field_tag :query,
                    params[:query],
                    class: "form-control input-search",
                    placeholder: "🔍 Explore..",
                    id: "search-bar"
                  %>
        </div>
      </div>
  <% end %>
</div>

<div class="container-event">
    <div class="featured">
      <h3>Featured events</h3>
          <%  months = { "04" => "April", "05" => "May", "06" => "June" } %>
          <% @events.each_with_index do |event, index| %>
          <% current_month = event.date.strftime("%m") %>
            <% if index == 0 || current_month != @events[index - 1].date.strftime("%m") %>
            <h4><%= months[current_month] %></h4>
          <% end %>
      <a data-bs-toggle="modal" data-bs-target="#staticBackdrop<%= event.id %>">
        <div class="card-event">
          <%= image_tag event.photo.url, class: "event-image" %>
            <div class="card-event-info">
              <h5><%= event.title %></h5>
                <div class="event-details">
                  <p><small><i class="fa-solid fa-location-dot"></i> <%= event.location %></small></p>
                  <p><small>🗓️ <%= event.date.strftime("%d %B %Y")%></small></p>
                </div>
            </div>
        </div>
      </a>
    <!-- Modal -->
  <div class="modal fade" id="staticBackdrop<%= event.id %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel<%= event.id %>" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel"><%= event.title %> 🎉</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <div class="modal-body" data-controller="attend">
        <%= image_tag event.photo.url, class: "modal-image" %>
        <div class="event-details" style="margin-left: 5px; margin-right: 5px; margin-bottom: 8px;">
          <p class="fw-bold">Event Details:</p>
          <p><%= event.description %></p>
        </div>
        <div class="event-info" style="margin-left: 5px; margin-right: 5px; margin-bottom: 8px;">
          <div class="d-flex justify-content-between" style="width: 300px;">
              <div>
                <p><small><i class="fa-solid fa-location-dot"></i> <%= event.location %></small></p>
              </div>
              <div>
                <p><small>🗓️ <%= event.date.strftime("%d %B %Y")%></small></p>
              </div>
          </div>
        </div>
          <div class="logo-button d-flex-justify-content-between">
              <button type="button" class="btn btn-warning" data-action="click->attend#toggle"  data-attend-target="button">Attend</button>
                <div class="fake-attendees" data-attend-target="fakeAttendees"></div>
          </div>
      </div>
    </div>
  </div>
  </div>
<% end %>
</div>
</div>
